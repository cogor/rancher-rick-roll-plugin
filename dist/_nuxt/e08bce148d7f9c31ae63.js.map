{"version":3,"sources":["webpack:///./node_modules/@rancher/shell/utils/install-redirect.js","webpack:///./node_modules/@rancher/shell/pages/c/_cluster/cis/index.vue?0101","webpack:///./node_modules/@rancher/shell/pages/c/_cluster/cis/index.vue?7214","webpack:///node_modules/@rancher/shell/pages/c/_cluster/cis/index.vue","webpack:///./node_modules/@rancher/shell/pages/c/_cluster/cis/index.vue"],"names":["product","chartName","defaultResourceOrRoute","install","redirect","store","cluster","getters","id","name","params","resource","dispatch","chart","query","REPO_TYPE","repoType","REPO","repoName","CHART","VERSION","versions","version","middleware","component","_vm","this","_h","$createElement","_self","_c","_v"],"mappings":"qIAEe,aAASA,EAASC,EAAWC,GAAwC,IAAhBC,IAAU,UAAH,+CACzE,6DAAO,8GACyD,GAD7BC,EAAQ,EAARA,SAAUC,EAAK,EAALA,MACrCC,GAAyC,QAA/B,EAAAD,EAAME,QAAwB,sBAAC,aAA/B,EAAiCC,KAAM,SAElDH,EAAME,QAAQ,4BAA4BP,GAAQ,oBAGhDE,EAAsB,mBACc,WAAlC,YAAOA,GAAmC,yCACtCE,EAASF,IAAuB,gCAGlCE,EAAS,CACdK,KAAQ,6BACRC,OAAQ,CACNJ,UACAN,UACAW,SAAUT,MAEZ,kCAIKC,EAAS,CAAF,iCAGVE,EAAMO,SAAS,gBAAe,QAEuB,KAArDC,EAAQR,EAAME,QAAQ,iBAAiB,CAAEN,eAErC,0CACDG,EAAS,CACdK,KAAQ,8BACRC,OAAQ,CAAEJ,WACVQ,OAAK,mBACFC,IAAYF,EAAMG,UAAQ,cAC1BC,IAAYJ,EAAMK,UAAQ,cAC1BC,IAAYN,EAAMZ,WAAS,cAC3BmB,IAAYP,EAAMQ,SAAS,GAAGC,SAAO,MAExC,QAGFjB,EAAMO,SAAS,eAAgB,uBAAF,OAA0BZ,IAAY,yDAG9DI,EAAS,CACdK,KAAQ,qBACRC,OAAQ,CAAEJ,cACV,4CAhD0B,OAkD/B,SAlDgC,GAAD,gCAAhC,E,4CCHF,I,0BCAwS,ECKzR,CAAfiB,gE,OCEIC,UAAY,YACd,GHRW,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAuC,OAAjBH,EAAII,MAAMC,IAAIH,GAAa,MAAM,CAACF,EAAIM,GAAG,iBAAiB,GAC5G,IGUpB,EACA,KACA,KACA,MAIa,UAAAP,U","file":"e08bce148d7f9c31ae63.js","sourcesContent":["import { REPO_TYPE, REPO, CHART, VERSION } from '@shell/config/query-params';\n\nexport default function(product, chartName, defaultResourceOrRoute, install = true) {\n  return async function middleware({ redirect, store } ) {\n    const cluster = store.getters['currentCluster']?.id || 'local';\n\n    if ( store.getters['type-map/isProductActive'](product) ) {\n      // If the product is installed and there's a default resource, redirect there\n\n      if ( defaultResourceOrRoute ) {\n        if ( typeof defaultResourceOrRoute === 'object' ) {\n          return redirect(defaultResourceOrRoute);\n        }\n\n        return redirect({\n          name:   'c-cluster-product-resource',\n          params: {\n            cluster,\n            product,\n            resource: defaultResourceOrRoute\n          },\n        });\n      }\n\n      // Otherwise just let the middleware pass through\n    } else if (install) {\n      // The product is not installed, redirect to the details chart\n\n      await store.dispatch('catalog/load');\n\n      const chart = store.getters['catalog/chart']({ chartName });\n\n      if ( chart ) {\n        return redirect({\n          name:   'c-cluster-apps-charts-chart',\n          params: { cluster },\n          query:  {\n            [REPO_TYPE]: chart.repoType,\n            [REPO]:      chart.repoName,\n            [CHART]:     chart.chartName,\n            [VERSION]:   chart.versions[0].version\n          },\n        });\n      } else {\n        // The chart's not available\n        store.dispatch('loadingError', `Chart not found for ${ product }`);\n      }\n    } else {\n      return redirect({\n        name:   'c-cluster-explorer',\n        params: { cluster },\n      });\n    }\n  };\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"This is cis.\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../cache-loader/dist/cjs.js??ref--6-0!../../../../../../thread-loader/dist/cjs.js??ref--6-1!../../../../../../babel-loader/lib/index.js??ref--6-2!../../../../../../vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../cache-loader/dist/cjs.js??ref--6-0!../../../../../../thread-loader/dist/cjs.js??ref--6-1!../../../../../../babel-loader/lib/index.js??ref--6-2!../../../../../../vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<script>\nimport InstallRedirect from '@shell/utils/install-redirect';\nimport { NAME, CHART_NAME } from '@shell/config/product/cis';\nimport { CIS } from '@shell/config/types';\n\nexport default { middleware: [InstallRedirect(NAME, CHART_NAME, CIS.CLUSTER_SCAN)] };\n</script>\n\n<template>\n  <div>This is cis.</div>\n</template>\n","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=29214c83&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}