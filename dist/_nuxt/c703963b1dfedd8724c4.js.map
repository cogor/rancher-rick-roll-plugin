{"version":3,"sources":["webpack:///./node_modules/@rancher/shell/utils/install-redirect.js","webpack:///./node_modules/@rancher/shell/pages/c/_cluster/istio/index.vue?a4c8","webpack:///node_modules/@rancher/shell/pages/c/_cluster/istio/index.vue","webpack:///./node_modules/@rancher/shell/pages/c/_cluster/istio/index.vue?4ec8","webpack:///./node_modules/@rancher/shell/pages/c/_cluster/istio/index.vue"],"names":["product","chartName","defaultResourceOrRoute","install","redirect","store","cluster","getters","id","name","params","resource","dispatch","chart","query","REPO_TYPE","repoType","REPO","repoName","CHART","VERSION","versions","version","components","middleware","fetch","type","data","kialiService","jaegerService","computed","mapGetters","theme","t","kialiLogo","kialiUrl","jaegerLogo","jaegerUrl","monitoringUrl","target","rel","methods","launchKiali","component","_vm","this","_h","$createElement","_c","_self","_v","domProps","_s","staticClass","class","on","attrs","ref","$event","stopPropagation","link","_e","app","$refs","jaeger","click"],"mappings":"qIAEe,aAASA,EAASC,EAAWC,GAAwC,IAAhBC,IAAU,UAAH,+CACzE,6DAAO,8GACyD,GAD7BC,EAAQ,EAARA,SAAUC,EAAK,EAALA,MACrCC,GAAyC,QAA/B,EAAAD,EAAME,QAAwB,sBAAC,aAA/B,EAAiCC,KAAM,SAElDH,EAAME,QAAQ,4BAA4BP,GAAQ,oBAGhDE,EAAsB,mBACc,WAAlC,YAAOA,GAAmC,yCACtCE,EAASF,IAAuB,gCAGlCE,EAAS,CACdK,KAAQ,6BACRC,OAAQ,CACNJ,UACAN,UACAW,SAAUT,MAEZ,kCAIKC,EAAS,CAAF,iCAGVE,EAAMO,SAAS,gBAAe,QAEuB,KAArDC,EAAQR,EAAME,QAAQ,iBAAiB,CAAEN,eAErC,0CACDG,EAAS,CACdK,KAAQ,8BACRC,OAAQ,CAAEJ,WACVQ,OAAK,mBACFC,IAAYF,EAAMG,UAAQ,cAC1BC,IAAYJ,EAAMK,UAAQ,cAC1BC,IAAYN,EAAMZ,WAAS,cAC3BmB,IAAYP,EAAMQ,SAAS,GAAGC,SAAO,MAExC,QAGFjB,EAAMO,SAAS,eAAgB,uBAAF,OAA0BZ,IAAY,yDAG9DI,EAAS,CACdK,KAAQ,qBACRC,OAAQ,CAAEJ,cACV,4CAhD0B,OAkD/B,SAlDgC,GAAD,gCAAhC,E,sFCHF,I,mrBCKe,ICLyR,EDKzR,CACfiB,cAEAC,4CAEAC,iBAAA,6KAEA,kCAAAC,SAAAlB,0BAAA,6GAGA,kCAAAkB,SAAAlB,4BAAA,gJALA,EAOA,EAEAmB,gBACA,OAAAC,kBAAAC,mBACA,EAEAC,gBACAC,aAAAC,oBAAAC,cAAA,IAEAC,qBAEA,cACA,EAEAC,oBACA,wEACA,EAEAC,sBACA,cACA,EAEAC,qBACA,sGACA,EAEAC,yBACA,6BACA7B,4BACAC,QAAAJ,sCACA,IACA,EAEAiC,kBACA,cACA,EAEAC,eACA,oCACA,IAGAC,SACAC,wBAAA,MAEA,8DAGA,wBACA,I,OE3DIC,UAAY,YACd,GHRW,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAG,cAAcN,EAAIM,GAAG,KAAKF,EAAG,KAAK,CAACG,SAAS,CAAC,UAAYP,EAAIQ,GAAGR,EAAIX,EAAE,kBAAmB,CAAC,GAAG,OAAUW,EAAIM,GAAG,KAAKF,EAAG,MAAM,CAACK,YAAY,SAAS,CAACL,EAAG,MAAM,CAACK,YAAY,qBAAqBC,MAAM,CAAC,UAAYV,EAAIT,WAAW,CAACa,EAAG,OAAO,CAACK,YAAY,0BAA0BE,GAAG,CAAC,MAAQX,EAAIF,cAAc,CAACM,EAAG,MAAM,CAACK,YAAY,aAAa,CAACL,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMZ,EAAIV,eAAeU,EAAIM,GAAG,KAAKF,EAAG,MAAM,CAACK,YAAY,gBAAgB,CAACL,EAAG,IAAI,CAACS,IAAI,QAAQD,MAAM,CAAC,UAAYZ,EAAIT,SAAS,KAAOS,EAAIT,SAAS,OAASS,EAAIL,OAAO,IAAMK,EAAIJ,KAAKe,GAAG,CAAC,MAAQ,SAASG,GAAQA,EAAOC,iBAAkB,IAAI,CAACX,EAAG,IAAI,CAACQ,MAAM,CAAC,EAAI,6BAA6BZ,EAAIM,GAAG,KAAKF,EAAG,IAAI,CAACK,YAAY,wCAAwC,GAAGT,EAAIM,GAAG,KAAKF,EAAG,MAAMJ,EAAIM,GAAG,KAAKF,EAAG,MAAM,CAACK,YAAY,eAAe,CAACL,EAAG,OAAO,CAACG,SAAS,CAAC,UAAYP,EAAIQ,GAAGR,EAAIX,EAAE,gCAAiC,CAAC2B,KAAMhB,EAAIN,gBAAgB,aAAgBM,EAAIM,GAAG,KAAON,EAAIT,SAA6IS,EAAIiB,KAAvIb,EAAG,MAAM,CAACK,YAAY,gBAAgB,CAACL,EAAG,OAAO,CAACG,SAAS,CAAC,UAAYP,EAAIQ,GAAGR,EAAIX,EAAE,uBAAwB,CAAC6B,IAAK,kBAA2BlB,EAAIM,GAAG,KAAKF,EAAG,MAAM,CAACK,YAAY,qBAAqBC,MAAM,CAAC,UAAYV,EAAIP,YAAY,CAACW,EAAG,OAAO,CAACK,YAAY,0BAA0BE,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAOd,EAAImB,MAAMC,OAAOC,OAAO,IAAI,CAACjB,EAAG,MAAM,CAACK,YAAY,aAAa,CAACL,EAAG,MAAM,CAACQ,MAAM,CAAC,IAAMZ,EAAIR,gBAAgBQ,EAAIM,GAAG,KAAKF,EAAG,MAAM,CAACK,YAAY,gBAAgB,CAACL,EAAG,IAAI,CAACS,IAAI,SAASD,MAAM,CAAC,UAAYZ,EAAIP,UAAU,KAAOO,EAAIP,UAAU,OAASO,EAAIL,OAAO,IAAMK,EAAIJ,KAAKe,GAAG,CAAC,MAAQ,SAASG,GAAQA,EAAOC,iBAAkB,IAAI,CAACX,EAAG,IAAI,CAACQ,MAAM,CAAC,EAAI,8BAA8BZ,EAAIM,GAAG,KAAKF,EAAG,IAAI,CAACK,YAAY,wCAAwC,GAAGT,EAAIM,GAAG,KAAKF,EAAG,MAAMJ,EAAIM,GAAG,KAAKF,EAAG,MAAM,CAACK,YAAY,eAAe,CAACL,EAAG,OAAO,CAACG,SAAS,CAAC,UAAYP,EAAIQ,GAAGR,EAAIX,EAAE,kCAAkC,aAAgBW,EAAIM,GAAG,KAAON,EAAIP,UAA+IO,EAAIiB,KAAxIb,EAAG,MAAM,CAACK,YAAY,gBAAgB,CAACL,EAAG,OAAO,CAACG,SAAS,CAAC,UAAYP,EAAIQ,GAAGR,EAAIX,EAAE,uBAAwB,CAAC6B,IAAK,sBAA+B,GAC5mE,IGUpB,EACA,KACA,KACA,MAIa,UAAAnB,U","file":"c703963b1dfedd8724c4.js","sourcesContent":["import { REPO_TYPE, REPO, CHART, VERSION } from '@shell/config/query-params';\n\nexport default function(product, chartName, defaultResourceOrRoute, install = true) {\n  return async function middleware({ redirect, store } ) {\n    const cluster = store.getters['currentCluster']?.id || 'local';\n\n    if ( store.getters['type-map/isProductActive'](product) ) {\n      // If the product is installed and there's a default resource, redirect there\n\n      if ( defaultResourceOrRoute ) {\n        if ( typeof defaultResourceOrRoute === 'object' ) {\n          return redirect(defaultResourceOrRoute);\n        }\n\n        return redirect({\n          name:   'c-cluster-product-resource',\n          params: {\n            cluster,\n            product,\n            resource: defaultResourceOrRoute\n          },\n        });\n      }\n\n      // Otherwise just let the middleware pass through\n    } else if (install) {\n      // The product is not installed, redirect to the details chart\n\n      await store.dispatch('catalog/load');\n\n      const chart = store.getters['catalog/chart']({ chartName });\n\n      if ( chart ) {\n        return redirect({\n          name:   'c-cluster-apps-charts-chart',\n          params: { cluster },\n          query:  {\n            [REPO_TYPE]: chart.repoType,\n            [REPO]:      chart.repoName,\n            [CHART]:     chart.chartName,\n            [VERSION]:   chart.versions[0].version\n          },\n        });\n      } else {\n        // The chart's not available\n        store.dispatch('loadingError', `Chart not found for ${ product }`);\n      }\n    } else {\n      return redirect({\n        name:   'c-cluster-explorer',\n        params: { cluster },\n      });\n    }\n  };\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"Overview\")]),_vm._v(\" \"),_c('h4',{domProps:{\"innerHTML\":_vm._s(_vm.t('istio.poweredBy', {}, true))}}),_vm._v(\" \"),_c('div',{staticClass:\"links\"},[_c('div',{staticClass:\"box link-container\",class:{'disabled':!_vm.kialiUrl}},[_c('span',{staticClass:\"link-content pull-right\",on:{\"click\":_vm.launchKiali}},[_c('div',{staticClass:\"link-logo\"},[_c('img',{attrs:{\"src\":_vm.kialiLogo}})]),_vm._v(\" \"),_c('div',{staticClass:\"link-content\"},[_c('a',{ref:\"kiali\",attrs:{\"disabled\":!_vm.kialiUrl,\"href\":_vm.kialiUrl,\"target\":_vm.target,\"rel\":_vm.rel},on:{\"click\":function($event){$event.stopPropagation();}}},[_c('t',{attrs:{\"k\":\"istio.links.kiali.label\"}}),_vm._v(\" \"),_c('i',{staticClass:\"icon icon-external-link pull-right\"})],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"description\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.t('istio.links.kiali.description', {link: _vm.monitoringUrl}, true))}})])])]),_vm._v(\" \"),(!_vm.kialiUrl)?_c('div',{staticClass:\"disabled-msg\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.t('istio.links.disabled', {app: 'Kiali'}))}})]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"box link-container\",class:{'disabled':!_vm.jaegerUrl}},[_c('span',{staticClass:\"link-content pull-right\",on:{\"click\":function($event){return _vm.$refs.jaeger.click()}}},[_c('div',{staticClass:\"link-logo\"},[_c('img',{attrs:{\"src\":_vm.jaegerLogo}})]),_vm._v(\" \"),_c('div',{staticClass:\"link-content\"},[_c('a',{ref:\"jaeger\",attrs:{\"disabled\":!_vm.jaegerUrl,\"href\":_vm.jaegerUrl,\"target\":_vm.target,\"rel\":_vm.rel},on:{\"click\":function($event){$event.stopPropagation();}}},[_c('t',{attrs:{\"k\":\"istio.links.jaeger.label\"}}),_vm._v(\" \"),_c('i',{staticClass:\"icon icon-external-link pull-right\"})],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"description\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.t('istio.links.jaeger.description', true))}})])])]),_vm._v(\" \"),(!_vm.jaegerUrl)?_c('div',{staticClass:\"disabled-msg\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.t('istio.links.disabled', {app: 'Jaeger'}))}})]):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { mapGetters } from 'vuex';\nimport { NAME, CHART_NAME } from '@shell/config/product/istio';\nimport InstallRedirect from '@shell/utils/install-redirect';\nimport { SERVICE } from '@shell/config/types';\nexport default {\n  components: {},\n\n  middleware: InstallRedirect(NAME, CHART_NAME),\n\n  async fetch() {\n    try {\n      this.kialiService = await this.$store.dispatch('cluster/find', { type: SERVICE, id: 'istio-system/kiali' });\n    } catch {}\n    try {\n      this.jaegerService = await this.$store.dispatch('cluster/find', { type: SERVICE, id: 'istio-system/tracing' });\n    } catch {}\n  },\n\n  data() {\n    return { kialiService: null, jaegerService: null };\n  },\n\n  computed: {\n    ...mapGetters({ theme: 'prefs/theme', t: 'i18n/t' }),\n\n    kialiLogo() {\n      // @TODO move to theme css\n      return require(`~shell/assets/images/vendor/kiali.svg`);\n    },\n\n    kialiUrl() {\n      return this.kialiService ? this.kialiService.proxyUrl('http', '20001') : null;\n    },\n\n    jaegerLogo() {\n      return require(`~shell/assets/images/vendor/jaeger.svg`);\n    },\n\n    jaegerUrl() {\n      return this.jaegerService ? `${ this.jaegerService.proxyUrl('http', '16686') }/jaeger/search` : null;\n    },\n\n    monitoringUrl() {\n      return this.$router.resolve({\n        name:   'c-cluster-monitoring',\n        params: { cluster: this.$route.params.cluster }\n      }).href;\n    },\n\n    target() {\n      return '_blank';\n    },\n\n    rel() {\n      return 'noopener noreferrer nofollow';\n    },\n  },\n\n  methods: {\n    launchKiali(e) {\n      // rancher-monitoring link in Kiali description was clicked\n      if (e.srcElement?.tagName === 'A') {\n        return;\n      }\n      this.$refs.kiali.click();\n    },\n  },\n};\n</script>\n\n<template>\n  <div>\n    <h1>Overview</h1>\n    <h4 v-html=\"t('istio.poweredBy', {}, true)\" />\n    <div class=\"links\">\n      <div :class=\"{'disabled':!kialiUrl}\" class=\"box link-container\">\n        <span\n          class=\"link-content pull-right\"\n          @click=\"launchKiali\"\n        >\n          <div class=\"link-logo\">\n            <img :src=\"kialiLogo\" />\n          </div>\n          <div class=\"link-content\">\n            <a\n              ref=\"kiali\"\n              :disabled=\"!kialiUrl\"\n              :href=\"kialiUrl\"\n              :target=\"target\"\n              :rel=\"rel\"\n              @click.stop\n            >\n              <t k=\"istio.links.kiali.label\" />\n              <i class=\"icon icon-external-link pull-right\" />\n            </a>\n            <hr />\n            <div class=\"description\">\n              <span v-html=\"t('istio.links.kiali.description', {link: monitoringUrl}, true)\" />\n            </div>\n          </div>\n        </span>\n        <div v-if=\"!kialiUrl\" class=\"disabled-msg\">\n          <span v-html=\"t('istio.links.disabled', {app: 'Kiali'})\" />\n        </div>\n      </div>\n      <div :class=\"{'disabled':!jaegerUrl}\" class=\"box link-container\">\n        <span\n          class=\"link-content pull-right\"\n          @click=\"$refs.jaeger.click()\"\n        >\n          <div class=\"link-logo\">\n            <img :src=\"jaegerLogo\" />\n          </div>\n          <div class=\"link-content\">\n            <a\n              ref=\"jaeger\"\n              :disabled=\"!jaegerUrl\"\n              :href=\"jaegerUrl\"\n              :target=\"target\"\n              :rel=\"rel\"\n              @click.stop\n            >\n              <t k=\"istio.links.jaeger.label\" />\n              <i class=\"icon icon-external-link pull-right\" />\n            </a>\n            <hr />\n            <div class=\"description\">\n              <span v-html=\"t('istio.links.jaeger.description', true)\" />\n            </div>\n          </div>\n        </span>\n        <div v-if=\"!jaegerUrl\" class=\"disabled-msg\">\n          <span v-html=\"t('istio.links.disabled', {app: 'Jaeger'})\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n","import mod from \"-!../../../../../../cache-loader/dist/cjs.js??ref--6-0!../../../../../../thread-loader/dist/cjs.js??ref--6-1!../../../../../../babel-loader/lib/index.js??ref--6-2!../../../../../../vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../cache-loader/dist/cjs.js??ref--6-0!../../../../../../thread-loader/dist/cjs.js??ref--6-1!../../../../../../babel-loader/lib/index.js??ref--6-2!../../../../../../vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=577c5f00&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}