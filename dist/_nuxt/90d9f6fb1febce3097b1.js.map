{"version":3,"sources":["webpack:///./node_modules/@rancher/shell/pages/c/_cluster/_product/members/index.vue?dc3d","webpack:///node_modules/@rancher/shell/components/ExplorerMembers.vue","webpack:///./node_modules/@rancher/shell/components/ExplorerMembers.vue?92e1","webpack:///./node_modules/@rancher/shell/pages/c/_cluster/_product/members/index.vue?6437","webpack:///node_modules/@rancher/shell/pages/c/_cluster/_product/members/index.vue","webpack:///./node_modules/@rancher/shell/components/ExplorerMembers.vue","webpack:///./node_modules/@rancher/shell/components/ExplorerMembers.vue?15b8","webpack:///./node_modules/@rancher/shell/pages/c/_cluster/_product/members/index.vue"],"names":["name","components","Banner","Masthead","ResourceTable","props","createLocationOverride","type","default","params","resource","fetch","clusterRoleTemplateBindingSchema","hydration","root","Promise","clusterRoleTemplateBindings","steveBindings","data","schema","MANAGEMENT","headers","createLocation","cluster","VIRTUAL_TYPES","computed","mapGetters","filteredClusterRoleTemplateBindings","canManageMembers","isLocal","ExplorerMembers","_vm","this","_h","$createElement","_c","_self","attrs","CLUSTER_MEMBERS","t","_v","_e","$fetchState","pending","currentCluster","_b","$attrs"],"mappings":"qJAAA,I,ivBCae,ICb+P,EDa/P,CACfA,uBAEAC,YACAC,WACAC,aACAC,mBAGAC,OAEAC,wBACAC,YACAC,mBACA,OACAR,yCACAS,QAAAC,4CAEA,IAIAC,iBAAA,oKAeA,OAdAC,wCAEA,mCAEAC,GACAD,sCAEA,CAAAL,wCACA,CAAAO,UACA,GACAF,0CAAAL,yCAAA,GACA,qCAAAA,qBACA,wCAAAA,gBACA,wCAAAA,0BACA,SACAQ,eAAA,0CAAAC,OAAA,SACAD,YACAC,mBAAA,mBACA,OAFAC,SAIA,qFArBA,EAsBA,EAEAC,gBACA,OACAC,mDACAC,mCAEAC,6BACAC,sBACA,iCACAb,cACA,wCACAc,kDAGAb,2CACAM,+BACAQ,kBAEA,EAEAC,gBACAC,qCACAC,+CAAA,WACA,gDACA,wEAEA,EACAC,4BACA,+BACA,EACAC,mBACA,iDACA,K,OE1FoT,ECErS,CAAf5B,YAAA6B,gBCKgB,YACd,GCRW,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,WAAW,CAACE,MAAM,CAAC,OAASN,EAAIZ,OAAO,SAAWY,EAAIrB,SAAS,oBAAoBqB,EAAIP,cAAcc,gBAAgB,kBAAkBP,EAAIT,eAAe,sBAAsBS,EAAIQ,EAAE,gCAAgCR,EAAIS,GAAG,KAAMT,EAAW,QAAEI,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,QAAQ,MAAQN,EAAIQ,EAAE,kCAAkCR,EAAIU,KAAKV,EAAIS,GAAG,KAAKL,EAAG,gBAAgB,CAACE,MAAM,CAAC,OAASN,EAAIZ,OAAO,QAAUY,EAAIV,QAAQ,KAAOU,EAAIJ,oCAAoC,WAAY,EAAM,YAAa,EAAM,QAAUI,EAAIW,YAAYC,UAAYZ,EAAIa,eAAe,aAAa,YAAY,aAAa,CAAC,mBAAmB,EAAE,GAC9rB,IDUpB,EACA,KACA,KACA,M,UEPE,EAAY,YACd,GPRW,WAAa,IAAIb,EAAIC,KAASC,EAAGF,EAAIG,eAAuC,OAAjBH,EAAIK,MAAMD,IAAIF,GAAa,kBAAkBF,EAAIc,GAAG,CAAC,EAAE,kBAAkBd,EAAIe,QAAO,GAAO,GAC7I,IOUpB,EACA,KACA,KACA,MAIa,Y","file":"90d9f6fb1febce3097b1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ExplorerMembers',_vm._b({},'ExplorerMembers',_vm.$attrs,false))}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { MANAGEMENT, NORMAN, VIRTUAL_TYPES } from '@shell/config/types';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Masthead from '@shell/components/ResourceList/Masthead';\nimport { AGE, ROLE, STATE, PRINCIPAL } from '@shell/config/table-headers';\nimport { canViewClusterPermissionsEditor } from '@shell/components/form/Members/ClusterPermissionsEditor.vue';\nimport Banner from '@components/Banner/Banner.vue';\nimport { mapGetters } from 'vuex';\n\n/**\n * Explorer members page.\n * Route: /c/local/explorer/members\n */\nexport default {\n  name: 'ExplorerMembers',\n\n  components: {\n    Banner,\n    Masthead,\n    ResourceTable\n  },\n\n  props: {\n    // Cluster tole template binding create route - defaults to the explorer route\n    createLocationOverride: {\n      type:    Object,\n      default: () => {\n        return {\n          name:   'c-cluster-product-resource-create',\n          params: { resource: MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING }\n        };\n      }\n    }\n  },\n\n  async fetch() {\n    const clusterRoleTemplateBindingSchema = this.$store.getters[\n      `rancher/schemaFor`\n    ](NORMAN.CLUSTER_ROLE_TEMPLATE_BINDING);\n\n    const hydration = [\n      clusterRoleTemplateBindingSchema ? this.$store.dispatch(\n        `rancher/findAll`,\n        { type: NORMAN.CLUSTER_ROLE_TEMPLATE_BINDING },\n        { root: true }\n      ) : [],\n      clusterRoleTemplateBindingSchema ? this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING }) : [],\n      this.$store.dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL }),\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.USER }),\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.ROLE_TEMPLATE })\n    ];\n    const [clusterRoleTemplateBindings] = await Promise.all(hydration);\n    const steveBindings = await Promise.all(\n      clusterRoleTemplateBindings.map(b => b.steve)\n    );\n\n    this.$set(this, 'clusterRoleTemplateBindings', steveBindings);\n  },\n\n  data() {\n    return {\n      schema: this.$store.getters[`management/schemaFor`](\n        MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING\n      ),\n      headers:        [STATE, PRINCIPAL, ROLE, AGE],\n      createLocation: {\n        ...this.createLocationOverride,\n        params: {\n          ...this.createLocationOverride.params,\n          cluster: this.$store.getters['currentCluster'].id\n        }\n      },\n      resource:                    MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING,\n      clusterRoleTemplateBindings: [],\n      VIRTUAL_TYPES\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    filteredClusterRoleTemplateBindings() {\n      return this.clusterRoleTemplateBindings.filter(\n        b => b.clusterName === this.$store.getters['currentCluster'].id\n      );\n    },\n    canManageMembers() {\n      return canViewClusterPermissionsEditor(this.$store);\n    },\n    isLocal() {\n      return this.$store.getters['currentCluster'].isLocal;\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <Masthead\n      :schema=\"schema\"\n      :resource=\"resource\"\n      :favorite-resource=\"VIRTUAL_TYPES.CLUSTER_MEMBERS\"\n      :create-location=\"createLocation\"\n      :create-button-label=\"t('members.createActionLabel')\"\n    />\n    <Banner\n      v-if=\"isLocal\"\n      color=\"error\"\n      :label=\"t('members.localClusterWarning')\"\n    />\n    <ResourceTable\n      :schema=\"schema\"\n      :headers=\"headers\"\n      :rows=\"filteredClusterRoleTemplateBindings\"\n      :groupable=\"false\"\n      :namespaced=\"false\"\n      :loading=\"$fetchState.pending || !currentCluster\"\n      sub-search=\"subSearch\"\n      :sub-fields=\"['nameDisplay']\"\n    />\n  </div>\n</template>\n","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--6-0!../../../thread-loader/dist/cjs.js??ref--6-1!../../../babel-loader/lib/index.js??ref--6-2!../../../vue-loader/lib/index.js??vue-loader-options!./ExplorerMembers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--6-0!../../../thread-loader/dist/cjs.js??ref--6-1!../../../babel-loader/lib/index.js??ref--6-2!../../../vue-loader/lib/index.js??vue-loader-options!./ExplorerMembers.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../../cache-loader/dist/cjs.js??ref--6-0!../../../../../../../thread-loader/dist/cjs.js??ref--6-1!../../../../../../../babel-loader/lib/index.js??ref--6-2!../../../../../../../vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../cache-loader/dist/cjs.js??ref--6-0!../../../../../../../thread-loader/dist/cjs.js??ref--6-1!../../../../../../../babel-loader/lib/index.js??ref--6-2!../../../../../../../vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<script>\nimport ExplorerMembers from '@shell/components/ExplorerMembers';\nexport default { components: { ExplorerMembers } };\n</script>\n\n<template><ExplorerMembers v-bind=\"$attrs\" /></template>\n","import { render, staticRenderFns } from \"./ExplorerMembers.vue?vue&type=template&id=3473dd70&\"\nimport script from \"./ExplorerMembers.vue?vue&type=script&lang=js&\"\nexport * from \"./ExplorerMembers.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Masthead',{attrs:{\"schema\":_vm.schema,\"resource\":_vm.resource,\"favorite-resource\":_vm.VIRTUAL_TYPES.CLUSTER_MEMBERS,\"create-location\":_vm.createLocation,\"create-button-label\":_vm.t('members.createActionLabel')}}),_vm._v(\" \"),(_vm.isLocal)?_c('Banner',{attrs:{\"color\":\"error\",\"label\":_vm.t('members.localClusterWarning')}}):_vm._e(),_vm._v(\" \"),_c('ResourceTable',{attrs:{\"schema\":_vm.schema,\"headers\":_vm.headers,\"rows\":_vm.filteredClusterRoleTemplateBindings,\"groupable\":false,\"namespaced\":false,\"loading\":_vm.$fetchState.pending || !_vm.currentCluster,\"sub-search\":\"subSearch\",\"sub-fields\":['nameDisplay']}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3e580cf8&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}